import{c as N,d as $,j as B}from"./chunk-NUTO5JUC.js";import{A as s,B as j,H as T,I as _,J as v,K as h,M as E,N as R,O as q,P as a,Q as c,R as O,U as F,V as m,Y as L,ba as P,d as D,ga as y,h as k,ha as U,i as C,j as S,k as w,l as g,m as b,p as d,t as M,ta as H,u as f,w as u,x as I}from"./chunk-IGLFLPLA.js";function V(t,e){let n=e?.injector??d(M),o=new D(1),p=I(()=>{let r;try{r=t()}catch(l){y(()=>o.error(l));return}y(()=>o.next(r))},{injector:n,manualCleanup:!0});return n.get(f).onDestroy(()=>{p.destroy(),o.complete()}),o.asObservable()}function A(t,e){let o=!e?.manualCleanup?e?.injector?.get(f)??d(f):null,p=z(e?.equal),r;e?.requireSync?r=u({kind:0},{equal:p}):r=u({kind:1,value:e?.initialValue},{equal:p});let l,x=t.subscribe({next:i=>r.set({kind:1,value:i}),error:i=>{r.set({kind:2,error:i}),l?.()},complete:()=>{l?.()}});if(e?.requireSync&&r().kind===0)throw new b(601,!1);return l=o?.onDestroy(x.unsubscribe.bind(x)),U(()=>{let i=r();switch(i.kind){case 1:return i.value;case 2:throw i.error;case 0:throw new b(601,!1)}},{equal:e?.equal})}function z(t=Object.is){return(e,n)=>e.kind===1&&n.kind===1&&t(e.value,n.value)}var G=t=>["/books","details",t],J=(t,e)=>e.isbn;function K(t,e){t&1&&(a(0,"span",1),m(1,"Searching ..."),c())}function Q(t,e){if(t&1&&(a(0,"li")(1,"a",2),m(2),c()()),t&2){let n=e.$implicit;s(),q("routerLink",P(3,G,n.isbn)),s(),L(" ",n.title," (",n.isbn,") ")}}function X(t,e){if(t&1&&(a(0,"section")(1,"h2"),m(2,"Search results"),c(),a(3,"ul"),E(4,Q,3,5,"li",null,J),c()()),t&2){let n=F();s(4),R(n.results())}}var W=class t{#e=d(B);searchTerm=u("");searchField=$(this.searchTerm);isLoading=u(!1);results=A(V(this.searchTerm).pipe(k(e=>e.length>=3),C(500),S(),g(()=>this.isLoading.set(!0)),w(e=>this.#e.search(e)),g(()=>this.isLoading.set(!1))),{initialValue:[]});static \u0275fac=function(n){return new(n||t)};static \u0275cmp=j({type:t,selectors:[["app-home-page"]],decls:6,vars:3,consts:[["type","search","placeholder","Search",3,"field"],["aria-busy","true"],[3,"routerLink"]],template:function(n,o){n&1&&(a(0,"h1"),m(1,"Welcome to the BookMonkey!"),c(),O(2,"hr"),a(3,"input",0),T(),c(),v(4,K,2,0,"span",1),v(5,X,6,0,"section")),n&2&&(s(3),_(o.searchField),s(),h(o.isLoading()?4:-1),s(),h(o.results().length?5:-1))},dependencies:[N,H],encapsulation:2})};export{W as HomePage};
