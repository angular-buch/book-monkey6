import{a as $,c as Z,f as z,h as G,k as J}from"./chunk-AQ4CEMFY.js";import{Aa as K,C as a,F as m,K as _,N as y,P as k,R as M,S as T,T as r,U as o,V as d,Y as j,_ as i,ba as I,g as D,ga as F,h as R,i as A,j as E,k as v,ka as O,l as g,ma as q,p,q as L,ra as H,sa as N,ta as B,ua as U,v as C,wa as f,xa as P,ya as W,z as l,za as V}from"./chunk-A64HT2UW.js";function x(e,t){let n=!t?.manualCleanup;n&&!t?.injector&&L(x);let c=n?t?.injector?.get(C)??p(C):null,S=Y(t?.equal),u;t?.requireSync?u=l({kind:0},{equal:S}):u=l({kind:1,value:t?.initialValue},{equal:S});let w=e.subscribe({next:s=>u.set({kind:1,value:s}),error:s=>{u.set({kind:2,error:s})}});if(t?.requireSync&&u().kind===0)throw new g(601,!1);return c?.onDestroy(w.unsubscribe.bind(w)),q(()=>{let s=u();switch(s.kind){case 1:return s.value;case 2:throw s.error;case 0:throw new g(601,!1)}},{equal:t?.equal})}function Y(e=Object.is){return(t,n)=>t.kind===1&&n.kind===1&&e(t.value,n.value)}var ne=e=>["/books","details",e],oe=(e,t)=>t.isbn;function re(e,t){e&1&&(r(0,"span",1),i(1,"Searching ..."),o())}function ie(e,t){if(e&1&&(r(0,"li")(1,"a",2),i(2),o()()),e&2){let n=t.$implicit;a(),y("routerLink",F(3,ne,n.isbn)),a(),I(" ",n.title," (",n.isbn,") ")}}function se(e,t){if(e&1&&(r(0,"section")(1,"h2"),i(2,"Search results"),o(),r(3,"ul"),M(4,ie,3,5,"li",null,oe),o()()),e&2){let n=j();a(4),T(n.results())}}var h=class e{#e=p(K);searchControl=new z("",{nonNullable:!0});isLoading=l(!1);results=x(this.searchControl.valueChanges.pipe(D(t=>t.length>=3),R(500),A(),v(()=>this.isLoading.set(!0)),E(t=>this.#e.searchBooks(t)),v(()=>this.isLoading.set(!1))),{initialValue:[]});static \u0275fac=function(n){return new(n||e)};static \u0275cmp=m({type:e,selectors:[["app-home"]],decls:6,vars:3,consts:[["type","search","placeholder","Search",3,"formControl"],["aria-busy","true"],[3,"routerLink"]],template:function(n,c){n&1&&(r(0,"h1"),i(1,"Welcome to the BookMonkey!"),o(),d(2,"hr")(3,"input",0),_(4,re,2,0,"span",1)(5,se,6,0,"section")),n&2&&(a(3),y("formControl",c.searchControl),a(),k(c.isLoading()?4:-1),a(),k(c.results().length?5:-1))},dependencies:[J,$,Z,G,f],encapsulation:2})};var Q=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:h,title:"BookMonkey"},{path:"books",loadChildren:()=>import("./chunk-GBJPEDUC.js").then(e=>e.booksPortalRoutes)},{path:"admin",loadChildren:()=>import("./chunk-4GGQR5B4.js").then(e=>e.booksAdminRoutes)}];var X={providers:[O(),W(Q,V()),H(N())]};var b=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=m({type:e,selectors:[["app-root"]],decls:13,vars:0,consts:[["routerLink","/home","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/books","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/admin","routerLinkActive","active","ariaCurrentWhenActive","page"]],template:function(n,c){n&1&&(r(0,"main")(1,"nav")(2,"ul")(3,"li")(4,"a",0),i(5,"Home"),o()(),r(6,"li")(7,"a",1),i(8,"Books"),o()(),r(9,"li")(10,"a",2),i(11,"Admin"),o()()()(),d(12,"router-outlet"),o())},dependencies:[U,f,P],encapsulation:2})};B(b,X).catch(e=>console.error(e));
