import{a as $,c as Z,f as z,h as G,k as J}from"./chunk-3UJIXIEV.js";import{A as l,C as a,F as p,J as j,M as y,O as k,Q as L,R as _,S as r,T as o,U as d,X as T,Z as i,aa as O,fa as I,g as D,h as R,i as A,ia as F,j as E,k as v,ka as q,l as g,p as m,pa as H,q as M,qa as N,ra as B,sa as U,ua as f,v as C,va as P,wa as W,xa as V,ya as K}from"./chunk-YKIZIEZZ.js";function x(e,t){let n=!t?.manualCleanup;n&&!t?.injector&&M(x);let c=n?t?.injector?.get(C)??m(C):null,w=Y(t?.equal),u;t?.requireSync?u=l({kind:0},{equal:w}):u=l({kind:1,value:t?.initialValue},{equal:w});let S=e.subscribe({next:s=>u.set({kind:1,value:s}),error:s=>{if(t?.rejectErrors)throw s;u.set({kind:2,error:s})}});if(t?.requireSync&&u().kind===0)throw new g(601,!1);return c?.onDestroy(S.unsubscribe.bind(S)),q(()=>{let s=u();switch(s.kind){case 1:return s.value;case 2:throw s.error;case 0:throw new g(601,!1)}},{equal:t?.equal})}function Y(e=Object.is){return(t,n)=>t.kind===1&&n.kind===1&&e(t.value,n.value)}var ne=e=>["/books","details",e],oe=(e,t)=>t.isbn;function re(e,t){e&1&&(r(0,"span",1),i(1,"Searching ..."),o())}function ie(e,t){if(e&1&&(r(0,"li")(1,"a",2),i(2),o()()),e&2){let n=t.$implicit;a(),y("routerLink",I(3,ne,n.isbn)),a(),O("",n.title," (",n.isbn,")")}}function se(e,t){if(e&1&&(r(0,"section")(1,"h2"),i(2,"Search results"),o(),r(3,"ul"),L(4,ie,3,5,"li",null,oe),o()()),e&2){let n=T();a(4),_(n.results())}}var b=class e{#e=m(K);searchControl=new z("",{nonNullable:!0});isLoading=l(!1);results=x(this.searchControl.valueChanges.pipe(D(t=>t.length>=3),R(500),A(),v(()=>this.isLoading.set(!0)),E(t=>this.#e.searchBooks(t)),v(()=>this.isLoading.set(!1))),{initialValue:[]});static \u0275fac=function(n){return new(n||e)};static \u0275cmp=p({type:e,selectors:[["app-home"]],decls:6,vars:3,consts:[["type","search","placeholder","Search",3,"formControl"],["aria-busy","true"],[3,"routerLink"]],template:function(n,c){n&1&&(r(0,"h1"),i(1,"Welcome to the BookMonkey!"),o(),d(2,"hr")(3,"input",0),j(4,re,2,0,"span",1)(5,se,6,0,"section")),n&2&&(a(3),y("formControl",c.searchControl),a(),k(c.isLoading()?4:-1),a(),k(c.results().length?5:-1))},dependencies:[J,$,Z,G,f],encapsulation:2})};var Q=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:b,title:"BookMonkey"},{path:"books",loadChildren:()=>import("./chunk-W5RPJUO5.js").then(e=>e.booksPortalRoutes)},{path:"admin",loadChildren:()=>import("./chunk-X5UEPZGE.js").then(e=>e.booksAdminRoutes)}];var X={providers:[F(),W(Q,V()),H(N())]};var h=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=p({type:e,selectors:[["app-root"]],decls:13,vars:0,consts:[["routerLink","/home","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/books","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/admin","routerLinkActive","active","ariaCurrentWhenActive","page"]],template:function(n,c){n&1&&(r(0,"main")(1,"nav")(2,"ul")(3,"li")(4,"a",0),i(5,"Home"),o()(),r(6,"li")(7,"a",1),i(8,"Books"),o()(),r(9,"li")(10,"a",2),i(11,"Admin"),o()()()(),d(12,"router-outlet"),o())},dependencies:[U,f,P],encapsulation:2})};B(h,X).catch(e=>console.error(e));
