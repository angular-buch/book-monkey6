import{a as F}from"./chunk-Y4S4GQGH.js";import{$ as k,Aa as w,B as L,C as a,F as h,I as U,L as $,M as d,O as b,P as f,Q as j,R as S,S as y,T as n,U as o,V as T,W as _,X as p,Y as B,Z as q,_ as r,aa as g,ba as A,ca as z,da as O,ea as G,ga as H,ha as E,ia as I,ja as J,na as K,oa as Q,pa as W,q as x,qa as v,s as c,sa as X,t as m,w as M,za as D}from"./chunk-PTHBNLAS.js";var C=class t{transform(i){return i.length!==13?i:[i.slice(0,3),i.slice(3,4),i.slice(4,8),i.slice(8,12),i.slice(12)].join("-")}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=U({name:"isbnFormat",type:t,pure:!0})};var te=t=>["details",t];function ie(t,i){if(t&1&&(n(0,"p",2),r(1),o()),t&2){B();let e=G(0);a(),k(e.subtitle)}}var V=class t{book=v.required();like=W();likeBook(){this.like.emit(this.book())}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-book-item"]],inputs:{book:[1,"book"]},outputs:{like:"like"},decls:15,vars:10,consts:[[1,"book-item"],["alt","Cover",3,"src"],["role","doc-subtitle"],[3,"routerLink"],["type","button",1,"secondary",3,"click"]],template:function(e,l){if(e&1){let s=_();z(0),n(1,"article",0),T(2,"img",1),n(3,"header")(4,"h2"),r(5),o()(),n(6,"div"),b(7,ie,2,1,"p",2),r(8),E(9,"isbnFormat"),o(),n(10,"footer")(11,"a",3),r(12,"Details"),o(),n(13,"button",4),p("click",function(){return c(s),m(l.likeBook())}),r(14,"Like"),o()()()}if(e&2){let s=O(l.book());a(2),d("src",s.imageUrl,L),a(3),k(s.title),a(2),f(s.subtitle?7:-1),a(),g(" ISBN: ",I(9,6,s.isbn)," "),a(3),d("routerLink",H(8,te,s.isbn))}},dependencies:[w,C],encapsulation:2})};var Z=(t,i)=>i.isbn;function oe(t,i){if(t&1&&(n(0,"li"),r(1),o()),t&2){let e=i.$implicit;a(),A("",e.title," (",e.isbn,")")}}function ne(t,i){t&1&&(n(0,"li"),r(1,"No books liked."),o())}function re(t,i){if(t&1){let e=_();n(0,"app-book-item",4),p("like",function(s){c(e);let u=B();return m(u.addLikedBook(s))}),o()}if(t&2){let e=i.$implicit;d("book",e)}}var P=class t{#e=x(F);#t=x(D);search=v();searchTerm=Q(()=>this.search()||"");books=this.#e.getBookList(this.searchTerm);likedBooks=M([]);constructor(){K(()=>{this.#t.navigate([],{queryParams:{search:this.searchTerm()||null}})})}addLikedBook(i){this.likedBooks().find(l=>l.isbn===i.isbn)||this.likedBooks.update(l=>[...l,i])}clearLikedBooks(){this.likedBooks.set([])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-book-list"]],inputs:{search:[1,"search"]},decls:19,vars:3,consts:[["searchInput",""],["type","button",3,"click"],["type","search","placeholder","Search","aria-label","Search",3,"input","value"],[3,"book"],[3,"like","book"]],template:function(e,l){if(e&1){let s=_();n(0,"section")(1,"h1"),r(2,"Favorite Books"),o(),n(3,"button",1),p("click",function(){return c(s),m(l.clearLikedBooks())}),r(4,"Clear"),o(),n(5,"ul"),S(6,oe,2,2,"li",null,Z,!1,ne,2,0,"li"),o()(),n(9,"section")(10,"h1"),r(11,"Books"),o(),n(12,"button",1),p("click",function(){return c(s),m(l.books.reload())}),r(13," Reload "),o(),n(14,"div")(15,"input",2,0),p("input",function(){c(s);let ee=q(16);return m(l.searchTerm.set(ee.value))}),o(),S(17,re,1,1,"app-book-item",3,Z),o()()}e&2&&(a(6),y(l.likedBooks()),a(6),$("aria-busy",l.books.isLoading()),a(3),d("value",l.searchTerm()),a(2),y(l.books.value()))},dependencies:[V],encapsulation:2})};function ae(t,i){t&1&&(n(0,"p",1),r(1,"Book could not be found."),o(),n(2,"a",2),r(3,"Back to list"),o())}function le(t,i){t&1&&(n(0,"p",0),r(1,"Loading..."),o())}function se(t,i){if(t&1&&(n(0,"p",3),r(1),o()),t&2){let e=B();a(),k(e.subtitle)}}function ce(t,i){if(t&1&&(n(0,"li"),r(1),o()),t&2){let e=i.$implicit;a(),k(e)}}function me(t,i){if(t&1){let e=_();n(0,"article")(1,"header")(2,"h1"),r(3),o(),b(4,se,2,1,"p",3),n(5,"div",4)(6,"div")(7,"h2"),r(8,"Authors"),o(),n(9,"ul"),S(10,ce,2,1,"li",null,j),o()(),n(12,"div")(13,"h2"),r(14,"ISBN"),o(),r(15),E(16,"isbnFormat"),o(),n(17,"div")(18,"h2"),r(19,"Created at"),o(),r(20),E(21,"date"),o()()(),n(22,"p"),r(23),o(),T(24,"img",5),n(25,"footer")(26,"a",2),r(27,"Back to list"),o(),n(28,"a",6),r(29,"Angular Book"),o(),n(30,"button",7),p("click",function(){let s=c(e),u=B();return m(u.deleteBook(s.isbn))}),r(31," Delete book "),o()()()}if(t&2){let e=i;a(3),k(e.title),a(),f(e.subtitle?4:-1),a(6),y(e.authors),a(5),g(" ",I(16,6,e.isbn)," "),a(5),g(" ",J(21,8,e.createdAt,"medium")," "),a(3),k(e.description),a(),d("src",e.imageUrl,L)}}var N=class t{#e=x(F);#t=x(D);isbn=v.required();book=this.#e.getOneBook(this.isbn);deleteBook(i){window.confirm("Delete book?")&&this.#e.deleteBook(i).subscribe(()=>{this.#t.navigateByUrl("/books")})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-book-details"]],inputs:{isbn:[1,"isbn"]},decls:3,vars:3,consts:[["aria-busy","true"],["role","alert"],["routerLink","/books"],["role","doc-subtitle"],[1,"grid"],["alt","Cover",3,"src"],["routerLink","/books/details/9783864909467"],["type","button",3,"click"]],template:function(e,l){if(e&1&&(b(0,ae,4,0),b(1,le,2,0,"p",0),b(2,me,32,11,"article")),e&2){let s;f(l.book.error()?0:-1),a(),f(l.book.isLoading()?1:-1),a(),f((s=l.book.value())?2:-1,s)}},dependencies:[w,X,C],encapsulation:2})};var Fe=[{path:"",component:P,title:"Books"},{path:"details/:isbn",component:N,title:"Book Details"}];export{Fe as booksPortalRoutes};
