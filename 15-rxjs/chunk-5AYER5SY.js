import{a as V,b,c as P,d as R,e as L,f as u,g as M,h as G,i as U,j as $,k as q}from"./chunk-NYIIWUNX.js";import{a as j}from"./chunk-TOY4Z4UE.js";import{C as m,F as f,L as k,M as s,O as S,P as y,Q as x,R as T,S as E,T as t,U as o,V as p,W as D,X as c,_ as a,a as w,b as N,ca as C,pa as I,q as _,s as h,t as F,za as A}from"./chunk-MVDN2YXA.js";function H(l,e){l&1&&(t(0,"small",3),a(1,"The title is invalid."),o())}function J(l,e){l&1&&(t(0,"small",8),a(1,"The ISBN is invalid."),o())}function K(l,e){if(l&1&&p(0,"input",11),l&2){let i=e.$implicit,n=e.$index;s("formControl",i),k("aria-label","Author "+n)}}var v=class l{submitBook=I();bookForm=new L({isbn:new u("",{nonNullable:!0,validators:[b.required,b.minLength(13),b.maxLength(13)]}),title:new u("",{nonNullable:!0,validators:b.required}),subtitle:new u("",{nonNullable:!0}),description:new u("",{nonNullable:!0}),authors:new $([new u("",{nonNullable:!0})]),imageUrl:new u("",{nonNullable:!0})});addAuthorControl(){this.bookForm.controls.authors.push(new u("",{nonNullable:!0}))}isInvalid(e){return e.touched?e.invalid&&e.touched:null}submitForm(){let e=this.bookForm.getRawValue(),i=e.authors.filter(r=>!!r),n=N(w({},e),{authors:i,createdAt:new Date().toISOString()});this.submitBook.emit(n)}static \u0275fac=function(i){return new(i||l)};static \u0275cmp=f({type:l,selectors:[["app-book-form"]],outputs:{submitBook:"submitBook"},decls:31,vars:13,consts:[[3,"ngSubmit","formGroup"],["for","title"],["id","title",3,"formControl"],["id","title-error"],["for","subtitle"],["id","subtitle",3,"formControl"],["for","isbn"],["id","isbn",3,"formControl"],["id","isbn-error"],["type","button",3,"click"],["role","group"],[3,"formControl"],["for","description"],["id","description",3,"formControl"],["for","imageUrl"],["type","url","id","imageUrl",3,"formControl"],["type","submit",3,"disabled"]],template:function(i,n){if(i&1){let r=D();C(0),t(1,"form",0),c("ngSubmit",function(){return h(r),F(n.submitForm())}),C(2),t(3,"label",1),a(4,"Title"),o(),p(5,"input",2),S(6,H,2,0,"small",3),t(7,"label",4),a(8,"Subtitle"),o(),p(9,"input",5),C(10),t(11,"label",6),a(12,"ISBN"),o(),p(13,"input",7),S(14,J,2,0,"small",8),t(15,"fieldset")(16,"legend"),a(17,"Authors"),o(),t(18,"button",9),c("click",function(){return h(r),F(n.addAuthorControl())}),a(19,"Add Author"),o(),t(20,"div",10),T(21,K,1,2,"input",11,x),o()(),t(23,"label",12),a(24,"Description"),o(),p(25,"textarea",13),t(26,"label",14),a(27,"Thumbnail URL"),o(),p(28,"input",15),t(29,"button",16),a(30,"Save"),o()()}if(i&2){let r=n.bookForm.controls;m(),s("formGroup",n.bookForm);let d=n.isInvalid(r.title);m(4),s("formControl",r.title),k("aria-describedby",d?"title-error":null)("aria-invalid",d),m(),y(d?6:-1),m(3),s("formControl",r.subtitle);let g=n.isInvalid(r.isbn);m(4),s("formControl",r.isbn),k("aria-describedby",g?"isbn-error":null)("aria-invalid",g),m(),y(g?14:-1),m(7),E(r.authors.controls),m(4),s("formControl",r.description),m(3),s("formControl",r.imageUrl),m(),s("disabled",n.bookForm.invalid)}},dependencies:[q,M,V,P,R,G,U],encapsulation:2})};var B=class l{#e=_(j);#t=_(A);createBook(e){this.#e.create(e).subscribe(i=>{this.#t.navigate(["/books","details",i.isbn])})}static \u0275fac=function(i){return new(i||l)};static \u0275cmp=f({type:l,selectors:[["app-book-create-page"]],decls:3,vars:0,consts:[[3,"submitBook"]],template:function(i,n){i&1&&(t(0,"h1"),a(1,"Create book"),o(),t(2,"app-book-form",0),c("submitBook",function(d){return n.createBook(d)}),o())},dependencies:[v],encapsulation:2})};var me=[{path:"",redirectTo:"create",pathMatch:"full"},{path:"create",component:B,title:"Create Book"}];export{me as booksAdminRoutes};
