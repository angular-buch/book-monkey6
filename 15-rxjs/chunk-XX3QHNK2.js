import{a as L,c as O,f as P,h as H,k as N}from"./chunk-NYIIWUNX.js";import{a as U}from"./chunk-TOY4Z4UE.js";import{Aa as I,C as o,F as _,M as b,O as g,P as h,R as M,S as R,T as s,U as a,V as j,Y as E,_ as l,ba as T,g as k,ga as q,h as w,i as x,j as S,k as m,l as p,ma as F,q as d,r as D,u as f,w as u}from"./chunk-MVDN2YXA.js";function v(t,e){let n=!e?.manualCleanup;n&&!e?.injector&&D(v);let c=n?e?.injector?.get(f)??d(f):null,y=$(e?.equal),i;e?.requireSync?i=u({kind:0},{equal:y}):i=u({kind:1,value:e?.initialValue},{equal:y});let C=t.subscribe({next:r=>i.set({kind:1,value:r}),error:r=>{i.set({kind:2,error:r})}});if(e?.requireSync&&i().kind===0)throw new p(601,!1);return c?.onDestroy(C.unsubscribe.bind(C)),F(()=>{let r=i();switch(r.kind){case 1:return r.value;case 2:throw r.error;case 0:throw new p(601,!1)}},{equal:e?.equal})}function $(t=Object.is){return(e,n)=>e.kind===1&&n.kind===1&&t(e.value,n.value)}var A=t=>["/books","details",t],B=(t,e)=>e.isbn;function W(t,e){t&1&&(s(0,"span",1),l(1,"Searching ..."),a())}function z(t,e){if(t&1&&(s(0,"li")(1,"a",2),l(2),a()()),t&2){let n=e.$implicit;o(),b("routerLink",q(3,A,n.isbn)),o(),T(" ",n.title," (",n.isbn,") ")}}function G(t,e){if(t&1&&(s(0,"section")(1,"h2"),l(2,"Search results"),a(),s(3,"ul"),M(4,z,3,5,"li",null,B),a()()),t&2){let n=E();o(4),R(n.results())}}var V=class t{#e=d(U);searchControl=new P("",{nonNullable:!0});isLoading=u(!1);results=v(this.searchControl.valueChanges.pipe(k(e=>e.length>=3),w(500),x(),m(()=>this.isLoading.set(!0)),S(e=>this.#e.search(e)),m(()=>this.isLoading.set(!1))),{initialValue:[]});static \u0275fac=function(n){return new(n||t)};static \u0275cmp=_({type:t,selectors:[["app-home-page"]],decls:6,vars:3,consts:[["type","search","placeholder","Search",3,"formControl"],["aria-busy","true"],[3,"routerLink"]],template:function(n,c){n&1&&(s(0,"h1"),l(1,"Welcome to the BookMonkey!"),a(),j(2,"hr")(3,"input",0),g(4,W,2,0,"span",1),g(5,G,6,0,"section")),n&2&&(o(3),b("formControl",c.searchControl),o(),h(c.isLoading()?4:-1),o(),h(c.results().length?5:-1))},dependencies:[N,L,O,H,I],encapsulation:2})};export{V as HomePage};
