import{a as V,b,c as R,d as L,e as M,f as u,g as G,h as U,i as $,j as q,k as P}from"./chunk-RBPAMU6L.js";import{Aa as j,C as m,F as f,L as k,M as s,O as g,P as y,Q as T,R as E,S as D,T as t,U as o,V as p,W as I,X as c,_ as l,a as w,b as N,ca as C,p as h,s as F,t as S,va as A,w as x}from"./chunk-CSUSYGPR.js";function H(a,e){a&1&&(t(0,"small",3),l(1,"The title is invalid."),o())}function J(a,e){a&1&&(t(0,"small",8),l(1,"The ISBN is invalid."),o())}function K(a,e){if(a&1&&p(0,"input",11),a&2){let i=e.$implicit,n=e.$index;s("formControl",i),k("aria-label","Author "+n)}}var v=class a{submitBook=x();bookForm=new M({isbn:new u("",{nonNullable:!0,validators:[b.required,b.minLength(13),b.maxLength(13)]}),title:new u("",{nonNullable:!0,validators:b.required}),subtitle:new u("",{nonNullable:!0}),description:new u("",{nonNullable:!0}),authors:new q([new u("",{nonNullable:!0})]),imageUrl:new u("",{nonNullable:!0})});addAuthorControl(){this.bookForm.controls.authors.push(new u("",{nonNullable:!0}))}isInvalid(e){return e.touched?e.invalid&&e.touched:null}submitForm(){let e=this.bookForm.getRawValue(),i=e.authors.filter(r=>!!r),n=N(w({},e),{authors:i,createdAt:new Date().toISOString()});this.submitBook.emit(n)}static \u0275fac=function(i){return new(i||a)};static \u0275cmp=f({type:a,selectors:[["app-book-form"]],outputs:{submitBook:"submitBook"},decls:31,vars:13,consts:[[3,"ngSubmit","formGroup"],["for","title"],["id","title",3,"formControl"],["id","title-error"],["for","subtitle"],["id","subtitle",3,"formControl"],["for","isbn"],["id","isbn",3,"formControl"],["id","isbn-error"],["type","button",3,"click"],["role","group"],[3,"formControl"],["for","description"],["id","description",3,"formControl"],["for","imageUrl"],["type","url","id","imageUrl",3,"formControl"],["type","submit",3,"disabled"]],template:function(i,n){if(i&1){let r=I();C(0),t(1,"form",0),c("ngSubmit",function(){return F(r),S(n.submitForm())}),C(2),t(3,"label",1),l(4,"Title"),o(),p(5,"input",2),g(6,H,2,0,"small",3),t(7,"label",4),l(8,"Subtitle"),o(),p(9,"input",5),C(10),t(11,"label",6),l(12,"ISBN"),o(),p(13,"input",7),g(14,J,2,0,"small",8),t(15,"fieldset")(16,"legend"),l(17,"Authors"),o(),t(18,"button",9),c("click",function(){return F(r),S(n.addAuthorControl())}),l(19,"Add Author"),o(),t(20,"div",10),E(21,K,1,2,"input",11,T),o()(),t(23,"label",12),l(24,"Description"),o(),p(25,"textarea",13),t(26,"label",14),l(27,"Thumbnail URL"),o(),p(28,"input",15),t(29,"button",16),l(30,"Save"),o()()}if(i&2){let r=n.bookForm.controls;m(),s("formGroup",n.bookForm);let d=n.isInvalid(r.title);m(4),s("formControl",r.title),k("aria-describedby",d?"title-error":null)("aria-invalid",d),m(),y(d?6:-1),m(3),s("formControl",r.subtitle);let _=n.isInvalid(r.isbn);m(4),s("formControl",r.isbn),k("aria-describedby",_?"isbn-error":null)("aria-invalid",_),m(),y(_?14:-1),m(7),D(r.authors.controls),m(4),s("formControl",r.description),m(3),s("formControl",r.imageUrl),m(),s("disabled",n.bookForm.invalid)}},dependencies:[P,G,V,R,L,U,$],encapsulation:2})};var B=class a{#e=h(j);#t=h(A);create(e){this.#e.createBook(e).subscribe(i=>{this.#t.navigate(["/books","details",i.isbn])})}static \u0275fac=function(i){return new(i||a)};static \u0275cmp=f({type:a,selectors:[["app-book-create"]],decls:3,vars:0,consts:[[3,"submitBook"]],template:function(i,n){i&1&&(t(0,"h1"),l(1,"Create book"),o(),t(2,"app-book-form",0),c("submitBook",function(d){return n.create(d)}),o())},dependencies:[v],encapsulation:2})};var me=[{path:"",redirectTo:"create",pathMatch:"full"},{path:"create",component:B,title:"Create Book"}];export{me as booksAdminRoutes};
