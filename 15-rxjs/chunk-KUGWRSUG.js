import{a as A,b,c as V,d as P,e as R,f as u,g as M,h as G,i as U,j as L,k as $}from"./chunk-FJXPIHFJ.js";import{a as q}from"./chunk-5QY2IUTQ.js";import{A as m,D as f,K as k,L as F,M as S,N as x,O as N,P as T,Q as s,R as t,S as o,T as d,U as E,V as c,Z as a,a as y,b as w,oa as D,q as g,r as _,s as h,ya as I}from"./chunk-B3WC5QAH.js";function z(l,e){l&1&&(t(0,"small",3),a(1,"The title is invalid."),o())}function H(l,e){l&1&&(t(0,"small",8),a(1,"The ISBN is invalid."),o())}function J(l,e){if(l&1&&d(0,"input",11),l&2){let i=e.$implicit,n=e.$index;s("formControl",i),k("aria-label","Author "+n+1)}}var C=class l{submitBook=D();bookForm=new R({isbn:new u("",{nonNullable:!0,validators:[b.required,b.minLength(13),b.maxLength(13)]}),title:new u("",{nonNullable:!0,validators:b.required}),subtitle:new u("",{nonNullable:!0}),description:new u("",{nonNullable:!0}),authors:new L([new u("",{nonNullable:!0})]),imageUrl:new u("",{nonNullable:!0})});addAuthorControl(){this.bookForm.controls.authors.push(new u("",{nonNullable:!0}))}isInvalid(e){return e.touched?e.invalid&&e.touched:null}submitForm(){let e=this.bookForm.getRawValue(),i=e.authors.filter(r=>!!r),n=w(y({},e),{authors:i,createdAt:new Date().toISOString()});this.submitBook.emit(n)}static \u0275fac=function(i){return new(i||l)};static \u0275cmp=f({type:l,selectors:[["app-book-form"]],outputs:{submitBook:"submitBook"},decls:28,vars:13,consts:[[3,"ngSubmit","formGroup"],["for","title"],["type","text","id","title",3,"formControl"],["id","title-error"],["for","subtitle"],["type","text","id","subtitle",3,"formControl"],["for","isbn"],["type","text","id","isbn",3,"formControl"],["id","isbn-error"],["type","button",3,"click"],["role","group"],["type","text",3,"formControl"],["for","description"],["id","description",3,"formControl"],["for","imageUrl"],["type","url","id","imageUrl",3,"formControl"],["type","submit",3,"disabled"]],template:function(i,n){if(i&1){let r=E();t(0,"form",0),c("ngSubmit",function(){return _(r),h(n.submitForm())}),t(1,"label",1),a(2,"Title"),o(),d(3,"input",2),F(4,z,2,0,"small",3),t(5,"label",4),a(6,"Subtitle"),o(),d(7,"input",5),t(8,"label",6),a(9,"ISBN"),o(),d(10,"input",7),F(11,H,2,0,"small",8),t(12,"fieldset")(13,"legend"),a(14,"Authors"),o(),t(15,"button",9),c("click",function(){return _(r),h(n.addAuthorControl())}),a(16,"Add Author"),o(),t(17,"div",10),N(18,J,1,2,"input",11,x),o()(),t(20,"label",12),a(21,"Description"),o(),d(22,"textarea",13),t(23,"label",14),a(24,"Thumbnail URL"),o(),d(25,"input",15),t(26,"button",16),a(27,"Save"),o()()}if(i&2){let r=n.bookForm.controls;s("formGroup",n.bookForm);let p=n.isInvalid(r.title);m(3),s("formControl",r.title),k("aria-describedby",p?"title-error":null)("aria-invalid",p),m(),S(p?4:-1),m(3),s("formControl",r.subtitle);let B=n.isInvalid(r.isbn);m(3),s("formControl",r.isbn),k("aria-describedby",B?"isbn-error":null)("aria-invalid",B),m(),S(B?11:-1),m(7),T(r.authors.controls),m(4),s("formControl",r.description),m(3),s("formControl",r.imageUrl),m(),s("disabled",n.bookForm.invalid)}},dependencies:[$,M,A,V,P,G,U],encapsulation:2})};var v=class l{#e=g(q);#t=g(I);createBook(e){this.#e.create(e).subscribe(i=>{this.#t.navigate(["/books","details",i.isbn])})}static \u0275fac=function(i){return new(i||l)};static \u0275cmp=f({type:l,selectors:[["app-book-create-page"]],decls:3,vars:0,consts:[[3,"submitBook"]],template:function(i,n){i&1&&(t(0,"h1"),a(1,"Create book"),o(),t(2,"app-book-form",0),c("submitBook",function(p){return n.createBook(p)}),o())},dependencies:[C],encapsulation:2})};var le=[{path:"",redirectTo:"create",pathMatch:"full"},{path:"create",component:v,title:"Create Book"}];export{le as booksAdminRoutes};
