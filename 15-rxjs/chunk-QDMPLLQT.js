import{$ as k,Aa as F,B as I,C as a,F as h,I as $,L as j,M as d,O as v,P as y,Q as q,R as C,S,T as n,U as o,V as L,W as b,X as p,Y as f,Z as A,_ as r,aa as g,ba as z,ca as O,da as G,ea as H,ga as J,ha as E,ia as T,ja as K,na as Q,oa as W,p as _,qa as X,s as c,t as m,va as D,w as M,wa as w,x as B,z as U}from"./chunk-CSUSYGPR.js";var x=class t{transform(i){return i.length!==13?i:[i.slice(0,3),i.slice(3,4),i.slice(4,8),i.slice(8,12),i.slice(12)].join("-")}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=$({name:"isbnFormat",type:t,pure:!0})};var te=t=>["details",t];function ie(t,i){if(t&1&&(n(0,"p",2),r(1),o()),t&2){f();let e=H(0);a(),k(e.subtitle)}}var V=class t{book=B.required();like=M();likeBook(){this.like.emit(this.book())}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-book-item"]],inputs:{book:[1,"book"]},outputs:{like:"like"},decls:15,vars:10,consts:[[1,"book-item"],["alt","Cover",3,"src"],["role","doc-subtitle"],[3,"routerLink"],["type","button",1,"secondary",3,"click"]],template:function(e,s){if(e&1){let l=b();O(0),n(1,"article",0),L(2,"img",1),n(3,"header")(4,"h2"),r(5),o()(),n(6,"div"),v(7,ie,2,1,"p",2),r(8),E(9,"isbnFormat"),o(),n(10,"footer")(11,"a",3),r(12,"Details"),o(),n(13,"button",4),p("click",function(){return c(l),m(s.likeBook())}),r(14,"Like"),o()()()}if(e&2){let l=G(s.book());a(2),d("src",l.imageUrl,I),a(3),k(l.title),a(2),y(l.subtitle?7:-1),a(),g(" ISBN: ",T(9,6,l.isbn)," "),a(3),d("routerLink",J(8,te,l.isbn))}},dependencies:[w,x],encapsulation:2})};var Z=(t,i)=>i.isbn;function oe(t,i){if(t&1&&(n(0,"li"),r(1),o()),t&2){let e=i.$implicit;a(),z("",e.title," (",e.isbn,")")}}function ne(t,i){t&1&&(n(0,"li"),r(1,"No books liked."),o())}function re(t,i){if(t&1){let e=b();n(0,"app-book-item",4),p("like",function(l){c(e);let u=f();return m(u.addLikedBook(l))}),o()}if(t&2){let e=i.$implicit;d("book",e)}}var P=class t{#e=_(F);#t=_(D);search=B("");searchTerm=W(()=>this.search()||"");books=this.#e.getBookList(this.searchTerm);likedBooks=U([]);constructor(){Q(()=>{this.#t.navigate([],{queryParams:{search:this.searchTerm()||null}})})}addLikedBook(i){this.likedBooks().find(s=>s.isbn===i.isbn)||this.likedBooks.update(s=>[...s,i])}clearLikedBooks(){this.likedBooks.set([])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-book-list"]],inputs:{search:[1,"search"]},decls:19,vars:3,consts:[["searchInput",""],["type","button",3,"click"],["type","search","placeholder","Search","aria-label","Search",3,"input","value"],[3,"book"],[3,"like","book"]],template:function(e,s){if(e&1){let l=b();n(0,"section")(1,"h1"),r(2,"Favorite Books"),o(),n(3,"button",1),p("click",function(){return c(l),m(s.clearLikedBooks())}),r(4,"Clear"),o(),n(5,"ul"),C(6,oe,2,2,"li",null,Z,!1,ne,2,0,"li"),o()(),n(9,"section")(10,"h1"),r(11,"Books"),o(),n(12,"button",1),p("click",function(){return c(l),m(s.books.reload())}),r(13," Reload "),o(),n(14,"div")(15,"input",2,0),p("input",function(){c(l);let ee=A(16);return m(s.searchTerm.set(ee.value))}),o(),C(17,re,1,1,"app-book-item",3,Z),o()()}e&2&&(a(6),S(s.likedBooks()),a(6),j("aria-busy",s.books.isLoading()),a(3),d("value",s.searchTerm()),a(2),S(s.books.value()))},dependencies:[V],encapsulation:2})};function ae(t,i){if(t&1&&(n(0,"p",0),r(1),o()),t&2){let e=f();a(),k(e.subtitle)}}function se(t,i){if(t&1&&(n(0,"li"),r(1),o()),t&2){let e=i.$implicit;a(),k(e)}}function le(t,i){if(t&1){let e=b();n(0,"article")(1,"header")(2,"h1"),r(3),o(),v(4,ae,2,1,"p",0),n(5,"div",1)(6,"div")(7,"h2"),r(8,"Authors"),o(),n(9,"ul"),C(10,se,2,1,"li",null,q),o()(),n(12,"div")(13,"h2"),r(14,"ISBN"),o(),r(15),E(16,"isbnFormat"),o(),n(17,"div")(18,"h2"),r(19,"Created at"),o(),r(20),E(21,"date"),o()()(),n(22,"p"),r(23),o(),L(24,"img",2),n(25,"footer")(26,"a",3),r(27,"Back to list"),o(),n(28,"a",4),r(29,"Angular Book"),o(),n(30,"button",5),p("click",function(){let l=c(e),u=f();return m(u.deleteBook(l.isbn))}),r(31," Delete book "),o()()()}if(t&2){let e=i;a(3),k(e.title),a(),y(e.subtitle?4:-1),a(6),S(e.authors),a(5),g(" ",T(16,6,e.isbn)," "),a(5),g(" ",K(21,8,e.createdAt,"medium")," "),a(3),k(e.description),a(),d("src",e.imageUrl,I)}}var N=class t{#e=_(F);#t=_(D);isbn=B.required();book=this.#e.getOneBook(this.isbn);deleteBook(i){window.confirm("Delete book?")&&this.#e.deleteBook(i).subscribe(()=>{this.#t.navigateByUrl("/books")})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-book-details"]],inputs:{isbn:[1,"isbn"]},decls:1,vars:1,consts:[["role","doc-subtitle"],[1,"grid"],["alt","Cover",3,"src"],["routerLink","/books"],["routerLink","/books/details/9783864909467"],["type","button",3,"click"]],template:function(e,s){if(e&1&&v(0,le,32,11,"article"),e&2){let l;y((l=s.book.value())?0:-1,l)}},dependencies:[w,X,x],encapsulation:2})};var De=[{path:"",component:P,title:"Books"},{path:"details/:isbn",component:N,title:"Book Details"}];export{De as booksPortalRoutes};
