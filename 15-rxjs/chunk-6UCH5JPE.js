import{a as L,c as O,f as P,h as H,k as N}from"./chunk-5HL2XFES.js";import{a as U}from"./chunk-E323632W.js";import{B as o,E as _,L as b,N as g,O as h,Q as M,R,S as s,T as a,U as j,X as T,Z as l,aa as E,fa as q,g as k,h as x,i as w,j as S,k as m,l as p,la as I,q as d,r as D,u as f,v as u,za as F}from"./chunk-GX7YXRBC.js";function v(t,e){let n=!e?.manualCleanup;n&&!e?.injector&&D(v);let c=n?e?.injector?.get(f)??d(f):null,y=V(e?.equal),i;e?.requireSync?i=u({kind:0},{equal:y}):i=u({kind:1,value:e?.initialValue},{equal:y});let C=t.subscribe({next:r=>i.set({kind:1,value:r}),error:r=>{i.set({kind:2,error:r})}});if(e?.requireSync&&i().kind===0)throw new p(601,!1);return c?.onDestroy(C.unsubscribe.bind(C)),I(()=>{let r=i();switch(r.kind){case 1:return r.value;case 2:throw r.error;case 0:throw new p(601,!1)}},{equal:e?.equal})}function V(t=Object.is){return(e,n)=>e.kind===1&&n.kind===1&&t(e.value,n.value)}var $=t=>["/books","details",t],A=(t,e)=>e.isbn;function W(t,e){t&1&&(s(0,"span",1),l(1,"Searching ..."),a())}function z(t,e){if(t&1&&(s(0,"li")(1,"a",2),l(2),a()()),t&2){let n=e.$implicit;o(),b("routerLink",q(3,$,n.isbn)),o(),E(" ",n.title," (",n.isbn,") ")}}function G(t,e){if(t&1&&(s(0,"section")(1,"h2"),l(2,"Search results"),a(),s(3,"ul"),M(4,z,3,5,"li",null,A),a()()),t&2){let n=T();o(4),R(n.results())}}var B=class t{#e=d(U);searchControl=new P("",{nonNullable:!0});isLoading=u(!1);results=v(this.searchControl.valueChanges.pipe(k(e=>e.length>=3),x(500),w(),m(()=>this.isLoading.set(!0)),S(e=>this.#e.searchBooks(e)),m(()=>this.isLoading.set(!1))),{initialValue:[]});static \u0275fac=function(n){return new(n||t)};static \u0275cmp=_({type:t,selectors:[["app-home-page"]],decls:6,vars:3,consts:[["type","search","placeholder","Search",3,"formControl"],["aria-busy","true"],[3,"routerLink"]],template:function(n,c){n&1&&(s(0,"h1"),l(1,"Welcome to the BookMonkey!"),a(),j(2,"hr")(3,"input",0),g(4,W,2,0,"span",1),g(5,G,6,0,"section")),n&2&&(o(3),b("formControl",c.searchControl),o(),h(c.isLoading()?4:-1),o(),h(c.results().length?5:-1))},dependencies:[N,L,O,H,F],encapsulation:2})};export{B as HomePage};
