import{a as F,c as L,f as O,h as P,k as U}from"./chunk-NRTYUHRE.js";import{a as H}from"./chunk-XTFR2DP5.js";import{A as r,D as w,L as b,M as g,O as M,P as I,Q as v,R as s,S as a,T as j,W as R,Z as l,aa as _,fa as E,g as x,h as D,i as k,j as S,k as p,l as m,la as q,q as d,t as f,v as u,za as T}from"./chunk-KC3CCT7O.js";function N(t,e){let c=!e?.manualCleanup?e?.injector?.get(f)??d(f):null,h=$(e?.equal),i;e?.requireSync?i=u({kind:0},{equal:h}):i=u({kind:1,value:e?.initialValue},{equal:h});let y,C=t.subscribe({next:o=>i.set({kind:1,value:o}),error:o=>{i.set({kind:2,error:o})},complete:()=>{y?.()}});if(e?.requireSync&&i().kind===0)throw new m(601,!1);return y=c?.onDestroy(C.unsubscribe.bind(C)),q(()=>{let o=i();switch(o.kind){case 1:return o.value;case 2:throw o.error;case 0:throw new m(601,!1)}},{equal:e?.equal})}function $(t=Object.is){return(e,n)=>e.kind===1&&n.kind===1&&t(e.value,n.value)}var A=t=>["/books","details",t],B=(t,e)=>e.isbn;function W(t,e){t&1&&(s(0,"span",1),l(1,"Searching ..."),a())}function z(t,e){if(t&1&&(s(0,"li")(1,"a",2),l(2),a()()),t&2){let n=e.$implicit;r(),v("routerLink",E(3,A,n.isbn)),r(),_(" ",n.title," (",n.isbn,") ")}}function G(t,e){if(t&1&&(s(0,"section")(1,"h2"),l(2,"Search results"),a(),s(3,"ul"),M(4,z,3,5,"li",null,B),a()()),t&2){let n=R();r(4),I(n.results())}}var V=class t{#e=d(H);searchControl=new O("",{nonNullable:!0});isLoading=u(!1);results=N(this.searchControl.valueChanges.pipe(x(e=>e.length>=3),D(500),k(),p(()=>this.isLoading.set(!0)),S(e=>this.#e.search(e)),p(()=>this.isLoading.set(!1))),{initialValue:[]});static \u0275fac=function(n){return new(n||t)};static \u0275cmp=w({type:t,selectors:[["app-home-page"]],decls:6,vars:3,consts:[["type","search","placeholder","Search",3,"formControl"],["aria-busy","true"],[3,"routerLink"]],template:function(n,c){n&1&&(s(0,"h1"),l(1,"Welcome to the BookMonkey!"),a(),j(2,"hr")(3,"input",0),b(4,W,2,0,"span",1),b(5,G,6,0,"section")),n&2&&(r(3),v("formControl",c.searchControl),r(),g(c.isLoading()?4:-1),r(),g(c.results().length?5:-1))},dependencies:[U,F,L,P,T],encapsulation:2})};export{V as HomePage};
