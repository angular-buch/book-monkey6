import{a as F,c as L,f as O,i as P,k as U}from"./chunk-K3CO7ALS.js";import{a as N}from"./chunk-OOTEPYPR.js";import{C as r,F as w,M as b,N as v,P as M,Q as I,R as h,S as s,T as a,U as j,X as _,_ as l,ba as R,g as x,ga as E,h as D,i as k,j as S,k as m,l as f,ma as q,q as d,t as g,w as u,za as T}from"./chunk-YAGW6DQ5.js";function H(t,e){let c=!e?.manualCleanup?e?.injector?.get(g)??d(g):null,y=$(e?.equal),i;e?.requireSync?i=u({kind:0},{equal:y}):i=u({kind:1,value:e?.initialValue},{equal:y});let p,C=t.subscribe({next:o=>i.set({kind:1,value:o}),error:o=>{i.set({kind:2,error:o}),p?.()},complete:()=>{p?.()}});if(e?.requireSync&&i().kind===0)throw new f(601,!1);return p=c?.onDestroy(C.unsubscribe.bind(C)),q(()=>{let o=i();switch(o.kind){case 1:return o.value;case 2:throw o.error;case 0:throw new f(601,!1)}},{equal:e?.equal})}function $(t=Object.is){return(e,n)=>e.kind===1&&n.kind===1&&t(e.value,n.value)}var A=t=>["/books","details",t],B=(t,e)=>e.isbn;function W(t,e){t&1&&(s(0,"span",1),l(1,"Searching ..."),a())}function z(t,e){if(t&1&&(s(0,"li")(1,"a",2),l(2),a()()),t&2){let n=e.$implicit;r(),h("routerLink",E(3,A,n.isbn)),r(),R(" ",n.title," (",n.isbn,") ")}}function G(t,e){if(t&1&&(s(0,"section")(1,"h2"),l(2,"Search results"),a(),s(3,"ul"),M(4,z,3,5,"li",null,B),a()()),t&2){let n=_();r(4),I(n.results())}}var V=class t{#e=d(N);searchControl=new O("",{nonNullable:!0});isLoading=u(!1);results=H(this.searchControl.valueChanges.pipe(x(e=>e.length>=3),D(500),k(),m(()=>this.isLoading.set(!0)),S(e=>this.#e.search(e)),m(()=>this.isLoading.set(!1))),{initialValue:[]});static \u0275fac=function(n){return new(n||t)};static \u0275cmp=w({type:t,selectors:[["app-home-page"]],decls:6,vars:3,consts:[["type","search","placeholder","Search",3,"formControl"],["aria-busy","true"],[3,"routerLink"]],template:function(n,c){n&1&&(s(0,"h1"),l(1,"Welcome to the BookMonkey!"),a(),j(2,"hr")(3,"input",0),b(4,W,2,0,"span",1),b(5,G,6,0,"section")),n&2&&(r(3),h("formControl",c.searchControl),r(),v(c.isLoading()?4:-1),r(),v(c.results().length?5:-1))},dependencies:[U,F,L,P,T],encapsulation:2})};export{V as HomePage};
