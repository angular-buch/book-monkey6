import{a as F}from"./chunk-XTFR2DP5.js";import{$ as w,A as a,D as g,G as M,K as U,L as b,M as f,N as A,O as C,P as S,Q as d,R as n,S as o,T as y,U as _,V as m,W as v,X as $,Z as r,_ as k,aa as j,ba as q,ca as z,da as G,fa as H,ga as P,ha as T,ia as J,ma as K,na as Q,oa as W,pa as x,q as B,r as c,ra as X,s as p,v as R,ya as D,z as E,za as I}from"./chunk-KC3CCT7O.js";var h=class t{transform(i){return i.length!==13?i:[i.slice(0,3),i.slice(3,4),i.slice(4,8),i.slice(8,12),i.slice(12)].join("-")}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=M({name:"isbnFormat",type:t,pure:!0})};var te=t=>["details",t];function ie(t,i){if(t&1&&(n(0,"p",2),r(1),o()),t&2){v();let e=G(0);a(),k(e.subtitle)}}var L=class t{book=x.required();like=W();likeBook(){this.like.emit(this.book())}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-book-card"]],inputs:{book:[1,"book"]},outputs:{like:"like"},decls:15,vars:10,consts:[[1,"book-card"],["alt","Cover",3,"src"],["role","doc-subtitle"],[3,"routerLink"],["type","button",1,"secondary",3,"click"]],template:function(e,l){if(e&1){let s=_();q(0),n(1,"article",0),y(2,"img",1),n(3,"header")(4,"h2"),r(5),o()(),n(6,"div"),b(7,ie,2,1,"p",2),r(8),P(9,"isbnFormat"),o(),n(10,"footer")(11,"a",3),r(12,"Details"),o(),n(13,"button",4),m("click",function(){return c(s),p(l.likeBook())}),r(14,"Like"),o()()()}if(e&2){let s=z(l.book());a(2),d("src",s.imageUrl,E),a(3),k(s.title),a(2),f(s.subtitle?7:-1),a(),w(" ISBN: ",T(9,6,s.isbn)," "),a(3),d("routerLink",H(8,te,s.isbn))}},dependencies:[I,h],encapsulation:2})};var Z=(t,i)=>i.isbn;function oe(t,i){if(t&1&&(n(0,"li"),r(1),o()),t&2){let e=i.$implicit;a(),j("",e.title," (",e.isbn,")")}}function ne(t,i){t&1&&(n(0,"li"),r(1,"No books liked."),o())}function re(t,i){if(t&1){let e=_();n(0,"app-book-card",4),m("like",function(s){c(e);let u=v();return p(u.addLikedBook(s))}),o()}if(t&2){let e=i.$implicit;d("book",e)}}var V=class t{#e=B(F);#t=B(D);search=x();searchTerm=Q(()=>this.search()||"");books=this.#e.getAll(this.searchTerm);likedBooks=R([]);constructor(){K(()=>{this.#t.navigate([],{queryParams:{search:this.searchTerm()||null}})})}addLikedBook(i){this.likedBooks().find(l=>l.isbn===i.isbn)||this.likedBooks.update(l=>[...l,i])}clearLikedBooks(){this.likedBooks.set([])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-books-overview-page"]],inputs:{search:[1,"search"]},decls:19,vars:3,consts:[["searchInput",""],["type","button",3,"click"],["type","search","placeholder","Search","aria-label","Search",3,"input","value"],[3,"book"],[3,"like","book"]],template:function(e,l){if(e&1){let s=_();n(0,"section")(1,"h1"),r(2,"Favorite Books"),o(),n(3,"button",1),m("click",function(){return c(s),p(l.clearLikedBooks())}),r(4,"Clear"),o(),n(5,"ul"),C(6,oe,2,2,"li",null,Z,!1,ne,2,0,"li"),o()(),n(9,"section")(10,"h1"),r(11,"Books"),o(),n(12,"button",1),m("click",function(){return c(s),p(l.books.reload())}),r(13," Reload "),o(),n(14,"div")(15,"input",2,0),m("input",function(){c(s);let ee=$(16);return p(l.searchTerm.set(ee.value))}),o(),C(17,re,1,1,"app-book-card",3,Z),o()()}e&2&&(a(6),S(l.likedBooks()),a(6),U("aria-busy",l.books.isLoading()),a(3),d("value",l.searchTerm()),a(2),S(l.books.value()))},dependencies:[L],encapsulation:2})};function ae(t,i){t&1&&(n(0,"p",1),r(1,"Book could not be found."),o(),n(2,"a",2),r(3,"Back to list"),o())}function le(t,i){t&1&&(n(0,"p",0),r(1,"Loading..."),o())}function se(t,i){if(t&1&&(n(0,"p",3),r(1),o()),t&2){let e=v();a(),k(e.subtitle)}}function ce(t,i){if(t&1&&(n(0,"li"),r(1),o()),t&2){let e=i.$implicit;a(),k(e)}}function pe(t,i){if(t&1){let e=_();n(0,"article")(1,"header")(2,"h1"),r(3),o(),b(4,se,2,1,"p",3),n(5,"div",4)(6,"div")(7,"h2"),r(8,"Authors"),o(),n(9,"ul"),C(10,ce,2,1,"li",null,A),o()(),n(12,"div")(13,"h2"),r(14,"ISBN"),o(),r(15),P(16,"isbnFormat"),o(),n(17,"div")(18,"h2"),r(19,"Created at"),o(),r(20),P(21,"date"),o()()(),n(22,"p"),r(23),o(),y(24,"img",5),n(25,"footer")(26,"a",2),r(27,"Back to list"),o(),n(28,"a",6),r(29,"Angular Book"),o(),n(30,"button",7),m("click",function(){let s=c(e),u=v();return p(u.removeBook(s.isbn))}),r(31," Delete book "),o()()()}if(t&2){let e=i;a(3),k(e.title),a(),f(e.subtitle?4:-1),a(6),S(e.authors),a(5),w(" ",T(16,6,e.isbn)," "),a(5),w(" ",J(21,8,e.createdAt,"medium")," "),a(3),k(e.description),a(),d("src",e.imageUrl,E)}}var O=class t{#e=B(F);#t=B(D);isbn=x.required();book=this.#e.getSingle(this.isbn);removeBook(i){window.confirm("Delete book?")&&this.#e.remove(i).subscribe(()=>{this.#t.navigateByUrl("/books")})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-book-details-page"]],inputs:{isbn:[1,"isbn"]},decls:3,vars:3,consts:[["aria-busy","true"],["role","alert"],["routerLink","/books"],["role","doc-subtitle"],[1,"grid"],["alt","Cover",3,"src"],["routerLink","/books/details/9783864909467"],["type","button",3,"click"]],template:function(e,l){if(e&1&&(b(0,ae,4,0),b(1,le,2,0,"p",0),b(2,pe,32,11,"article")),e&2){let s;f(l.book.error()?0:-1),a(),f(l.book.isLoading()?1:-1),a(),f((s=l.book.value())?2:-1,s)}},dependencies:[I,X,h],encapsulation:2})};var Fe=[{path:"",component:V,title:"Books"},{path:"details/:isbn",component:O,title:"Book Details"}];export{Fe as booksPortalRoutes};
