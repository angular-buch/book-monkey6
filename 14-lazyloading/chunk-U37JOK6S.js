import{a as N}from"./chunk-3K32WODR.js";import{a as W,h as V,i as F}from"./chunk-2VX3DAN3.js";import{Ba as j,Ka as f,La as _,M as g,Ma as q,Na as C,Oa as S,Pa as d,Qa as n,R as c,Ra as i,S as p,Sa as D,Va as v,Ya as m,Za as k,aa as A,bb as z,ca as $,cb as r,db as u,eb as w,fb as G,gb as T,hb as I,ib as y,kb as H,lb as P,mb as L,na as E,nb as J,pa as a,tb as K,xb as Q,yb as x,za as B}from"./chunk-O3ZF45NP.js";var h=class t{transform(o){return o.length!==13?o:[o.slice(0,3),o.slice(3,4),o.slice(4,8),o.slice(8,12),o.slice(12)].join("-")}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=j({name:"isbnFormat",type:t,pure:!0})};var ee=t=>["details",t];function te(t,o){if(t&1&&(n(0,"p",2),r(1),i()),t&2){k();let e=y(0);a(),u(e.subtitle)}}var M=class t{book=x.required();like=Q();likeBook(){this.like.emit(this.book())}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=B({type:t,selectors:[["app-book-card"]],inputs:{book:[1,"book"]},outputs:{like:"like"},decls:15,vars:10,consts:[[1,"book-card"],["alt","Cover",3,"src"],["role","doc-subtitle"],[3,"routerLink"],["type","button",1,"secondary",3,"click"]],template:function(e,l){if(e&1){let s=v();T(0),n(1,"article",0),D(2,"img",1),n(3,"header")(4,"h2"),r(5),i()(),n(6,"div"),f(7,te,2,1,"p",2),r(8),P(9,"isbnFormat"),i(),n(10,"footer")(11,"a",3),r(12,"Details"),i(),n(13,"button",4),m("click",function(){return c(s),p(l.likeBook())}),r(14,"Like"),i()()()}if(e&2){let s=I(l.book());a(2),d("src",s.imageUrl,E),a(3),u(s.title),a(2),_(s.subtitle?7:-1),a(),w(" ISBN: ",L(9,6,s.isbn)," "),a(3),d("routerLink",H(8,ee,s.isbn))}},dependencies:[F,h],encapsulation:2})};var Y=(t,o)=>o.isbn;function ie(t,o){if(t&1&&(n(0,"li"),r(1),i()),t&2){let e=o.$implicit;a(),G("",e.title," (",e.isbn,")")}}function oe(t,o){t&1&&(n(0,"li"),r(1,"No books liked."),i())}function ne(t,o){if(t&1){let e=v();n(0,"app-book-card",5),m("like",function(s){c(e);let b=k();return p(b.addLikedBook(s))}),i()}if(t&2){let e=o.$implicit;d("book",e)}}var O=class t{#e=g(N);#t=g(V);search=x();searchTerm=K(()=>this.search()||"");books=this.#e.getAll(this.searchTerm);likedBooks=A([]);constructor(){$(()=>{this.#t.navigate([],{queryParams:{search:this.searchTerm()||null}})})}addLikedBook(o){this.likedBooks().find(l=>l.isbn===o.isbn)||this.likedBooks.update(l=>[...l,o])}clearLikedBooks(){this.likedBooks.set([])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=B({type:t,selectors:[["app-books-overview-page"]],inputs:{search:[1,"search"]},decls:19,vars:3,consts:[["searchInput",""],["type","button",3,"click"],["type","button",3,"click","ariaBusy"],["type","search","placeholder","Search","aria-label","Search",3,"input","value"],[3,"book"],[3,"like","book"]],template:function(e,l){if(e&1){let s=v();n(0,"section")(1,"h1"),r(2,"Favorite Books"),i(),n(3,"button",1),m("click",function(){return c(s),p(l.clearLikedBooks())}),r(4,"Clear"),i(),n(5,"ul"),C(6,ie,2,2,"li",null,Y,!1,oe,2,0,"li"),i()(),n(9,"section")(10,"h1"),r(11,"Books"),i(),n(12,"button",2),m("click",function(){return c(s),p(l.books.reload())}),r(13," Reload "),i(),n(14,"div")(15,"input",3,0),m("input",function(){c(s);let Z=z(16);return p(l.searchTerm.set(Z.value))}),i(),C(17,ne,1,1,"app-book-card",4,Y),i()()}e&2&&(a(6),S(l.likedBooks()),a(6),d("ariaBusy",l.books.isLoading()),a(3),d("value",l.searchTerm()),a(2),S(l.books.value()))},dependencies:[M],encapsulation:2})};function re(t,o){t&1&&(n(0,"p",1),r(1,"Book could not be found."),i(),n(2,"a",2),r(3,"Back to list"),i())}function ae(t,o){t&1&&(n(0,"p",0),r(1,"Loading ..."),i())}function le(t,o){if(t&1&&(n(0,"p",3),r(1),i()),t&2){k();let e=y(0);a(),u(e.subtitle)}}function se(t,o){if(t&1&&(n(0,"li"),r(1),i()),t&2){let e=o.$implicit;a(),u(e)}}function ce(t,o){if(t&1){let e=v();T(0),n(1,"article")(2,"header")(3,"h1"),r(4),i(),f(5,le,2,1,"p",3),n(6,"div",4)(7,"div")(8,"h2"),r(9,"Authors"),i(),n(10,"ul"),C(11,se,2,1,"li",null,q),i()(),n(13,"div")(14,"h2"),r(15,"ISBN"),i(),r(16),P(17,"isbnFormat"),i(),n(18,"div")(19,"h2"),r(20,"Created at"),i(),r(21),P(22,"date"),i()()(),n(23,"p"),r(24),i(),D(25,"img",5),n(26,"footer")(27,"a",2),r(28,"Back to list"),i(),n(29,"a",6),r(30,"Angular Book"),i(),n(31,"button",7),m("click",function(){c(e);let s=y(0),b=k();return p(b.removeBook(s.isbn))}),r(32," Delete book "),i()()()}if(t&2){let e=I(k().book.value());a(4),u(e.title),a(),_(e.subtitle?5:-1),a(6),S(e.authors),a(5),w(" ",L(17,7,e.isbn)," "),a(5),w(" ",J(22,9,e.createdAt,"medium")," "),a(3),u(e.description),a(),d("src",e.imageUrl,E)}}var R=class t{#e=g(N);#t=g(V);isbn=x.required();book=this.#e.getSingle(this.isbn);removeBook(o){window.confirm("Delete book?")&&this.#e.remove(o).subscribe(()=>{this.#t.navigateByUrl("/books")})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=B({type:t,selectors:[["app-book-details-page"]],inputs:{isbn:[1,"isbn"]},decls:3,vars:3,consts:[["aria-busy","true"],["role","alert"],["routerLink","/books"],["role","doc-subtitle"],[1,"grid"],["alt","Cover",3,"src"],["routerLink","/books/details/9783864909467"],["type","button",3,"click"]],template:function(e,l){e&1&&(f(0,re,4,0),f(1,ae,2,0,"p",0),f(2,ce,33,12,"article")),e&2&&(_(l.book.error()?0:-1),a(),_(l.book.isLoading()?1:-1),a(),_(l.book.hasValue()?2:-1))},dependencies:[F,W,h],encapsulation:2})};var Ie=[{path:"",component:O,title:"Books"},{path:"details/:isbn",component:R,title:"Book Details"}];export{Ie as booksPortalRoutes};
