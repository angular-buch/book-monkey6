import{a as T}from"./chunk-3A2OKVUE.js";import{$ as j,D as v,F as R,G as d,I as h,J as M,K as x,L as S,M as o,N as i,O as g,P as b,Q as c,R as _,S as P,T as n,U as k,V as y,W as U,X as $,Y as q,Z as A,aa as z,ba as O,fa as G,ga as H,ia as J,l as f,n as m,o as p,pa as L,qa as I,r as F,s as B,u as N,v as E,w as a,z as C}from"./chunk-EMUGM7BJ.js";var Y=t=>["details",t];function Z(t,r){if(t&1&&(o(0,"p",2),n(1),i()),t&2){_();let e=A(0);a(),k(e.subtitle)}}var D=class t{book=B.required();like=F();likeBook(){this.like.emit(this.book())}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=C({type:t,selectors:[["app-book-item"]],inputs:{book:[1,"book"]},outputs:{like:"like"},decls:14,vars:8,consts:[[1,"book-item"],["alt","Cover",3,"src"],["role","doc-subtitle"],[3,"routerLink"],["type","button",1,"secondary",3,"click"]],template:function(e,l){if(e&1){let s=b();$(0),o(1,"article",0),g(2,"img",1),o(3,"header")(4,"h2"),n(5),i()(),o(6,"div"),v(7,Z,2,1,"p",2),n(8),i(),o(9,"footer")(10,"a",3),n(11,"Details"),i(),o(12,"button",4),c("click",function(){return m(s),p(l.likeBook())}),n(13,"Like"),i()()()}if(e&2){let s=q(l.book());a(2),d("src",s.imageUrl,E),a(3),k(s.title),a(2),h(s.subtitle?7:-1),a(),y(" ISBN: ",s.isbn," "),a(2),d("routerLink",j(6,Y,s.isbn))}},dependencies:[I],encapsulation:2})};var W=(t,r)=>r.isbn;function ee(t,r){if(t&1&&(o(0,"li"),n(1),i()),t&2){let e=r.$implicit;a(),U("",e.title," (",e.isbn,")")}}function te(t,r){t&1&&(o(0,"li"),n(1,"No books liked."),i())}function ie(t,r){if(t&1){let e=b();o(0,"app-book-item",4),c("like",function(s){m(e);let u=_();return p(u.addLikedBook(s))}),i()}if(t&2){let e=r.$implicit;d("book",e)}}var w=class t{#e=f(T);#t=f(L);search=B("");searchTerm=H(()=>this.search()||"");books=this.#e.getBookList(this.searchTerm);likedBooks=N([]);constructor(){G(()=>{this.#t.navigate([],{queryParams:{search:this.searchTerm()||null}})})}addLikedBook(r){this.likedBooks().find(l=>l.isbn===r.isbn)||this.likedBooks.update(l=>[...l,r])}clearLikedBooks(){this.likedBooks.set([])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=C({type:t,selectors:[["app-book-list"]],inputs:{search:[1,"search"]},decls:19,vars:3,consts:[["searchInput",""],["type","button",3,"click"],["type","search","placeholder","Search","aria-label","Search",3,"input","value"],[3,"book"],[3,"like","book"]],template:function(e,l){if(e&1){let s=b();o(0,"section")(1,"h1"),n(2,"Favorite Books"),i(),o(3,"button",1),c("click",function(){return m(s),p(l.clearLikedBooks())}),n(4,"Clear"),i(),o(5,"ul"),x(6,ee,2,2,"li",null,W,!1,te,2,0,"li"),i()(),o(9,"section")(10,"h1"),n(11,"Books"),i(),o(12,"button",1),c("click",function(){return m(s),p(l.books.reload())}),n(13," Reload "),i(),o(14,"div")(15,"input",2,0),c("input",function(){m(s);let X=P(16);return p(l.searchTerm.set(X.value))}),i(),x(17,ie,1,1,"app-book-item",3,W),i()()}e&2&&(a(6),S(l.likedBooks()),a(6),R("aria-busy",l.books.isLoading()),a(3),d("value",l.searchTerm()),a(2),S(l.books.value()))},dependencies:[D],encapsulation:2})};function oe(t,r){if(t&1&&(o(0,"p",0),n(1),i()),t&2){let e=_();a(),k(e.subtitle)}}function ne(t,r){if(t&1&&(o(0,"li"),n(1),i()),t&2){let e=r.$implicit;a(),k(e)}}function re(t,r){if(t&1){let e=b();o(0,"article")(1,"header")(2,"h1"),n(3),i(),v(4,oe,2,1,"p",0),o(5,"div",1)(6,"div")(7,"h2"),n(8,"Authors"),i(),o(9,"ul"),x(10,ne,2,1,"li",null,M),i()(),o(12,"div")(13,"h2"),n(14,"ISBN"),i(),n(15),i(),o(16,"div")(17,"h2"),n(18,"Created at"),i(),n(19),z(20,"date"),i()()(),o(21,"p"),n(22),i(),g(23,"img",2),o(24,"footer")(25,"a",3),n(26,"Back to list"),i(),o(27,"a",4),n(28,"Angular Book"),i(),o(29,"button",5),c("click",function(){let s=m(e),u=_();return p(u.deleteBook(s.isbn))}),n(30," Delete book "),i()()()}if(t&2){let e=r;a(3),k(e.title),a(),h(e.subtitle?4:-1),a(6),S(e.authors),a(5),y(" ",e.isbn," "),a(4),y(" ",O(20,6,e.createdAt,"medium")," "),a(3),k(e.description),a(),d("src",e.imageUrl,E)}}var V=class t{#e=f(T);#t=f(L);isbn=B.required();book=this.#e.getOneBook(this.isbn);deleteBook(r){window.confirm("Delete book?")&&this.#e.deleteBook(r).subscribe(()=>{this.#t.navigateByUrl("/books")})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=C({type:t,selectors:[["app-book-details"]],inputs:{isbn:[1,"isbn"]},decls:1,vars:1,consts:[["role","doc-subtitle"],[1,"grid"],["alt","Cover",3,"src"],["routerLink","/books"],["routerLink","/books/details/9783864909467"],["type","button",3,"click"]],template:function(e,l){if(e&1&&v(0,re,31,9,"article"),e&2){let s;h((s=l.book.value())?0:-1,s)}},dependencies:[I,J],encapsulation:2})};var ye=[{path:"",component:w,title:"Books"},{path:"details/:isbn",component:V,title:"Book Details"}];export{ye as booksPortalRoutes};
